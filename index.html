<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Team | La cancha</title>

    <!-- Custom fonts for this template-->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="css/sb-admin-2.min.css" rel="stylesheet">

</head>

<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">

        <!-- Sidebar -->
        <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

            <!-- Sidebar - Brand -->
            <a class="sidebar-brand d-flex align-items-center justify-content-center" href="index.html">
                <div class="sidebar-brand-icon rotate-n-15">
                    <i class="fas fa-futbol"></i>
                </div>
                <div class="sidebar-brand-text mx-3">LA CANCHA <sup>1.1.0</sup></div>
            </a>

            <!-- Divider -->
            <hr class="sidebar-divider my-0">

            <!-- Nav Item - Dashboard -->
            <li class="nav-item active">
                <a class="nav-link" href="index.html">
                    <span>ARMAR EQUIPOS</span></a>
            </li>

            <!-- Divider -->
           <hr class="sidebar-divider">
        </ul>
        <!-- End of Sidebar -->

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <!-- Begin Page Content -->
                <div class="container-fluid mt-4">

                    <!-- Content Row -->
                    <div class="row">

                        <!-- Earnings (Monthly) Card Example -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-primary shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                                mejor jugador</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">Jere Quinteros</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-trophy fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Earnings (Monthly) Card Example -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                MAS PICANTE</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">El pela</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-pepper-hot fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Earnings (Monthly) Card Example -->
                        <!--<div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-info shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Tasks
                                            </div>
                                            <div class="row no-gutters align-items-center">
                                                <div class="col-auto">
                                                    <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">50%</div>
                                                </div>
                                                <div class="col">
                                                    <div class="progress progress-sm mr-2">
                                                        <div class="progress-bar bg-info" role="progressbar"
                                                            style="width: 50%" aria-valuenow="50" aria-valuemin="0"
                                                            aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>-->

                        <!-- Pending Requests Card Example -->
                        <!--<div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-warning shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                                Pending Requests</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">18</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-comments fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>-->
                    </div>

                    <!-- Content Row -->


                    <!-- Content Row -->
                    <div class="row">

                        <!-- Content Column -->
                        <div class="col-lg-6 mb-4">

                            <!-- Project Card Example -->
                            <div class="card shadow mb-4 p-4">
                            	<div class='selection-list'>
									<h1>Lista de selección</h1>
									<select name="allPlayers" id="allPlayersSelect" class="form-select all-players" multiple>
							  		</select>
                                    <div id="errorString"></div>
                                    <div>
                                        <button class="btn btn-primary mt-2"  onclick="addPlayers()">Sumar al lunes</button>
                                        <button class="btn btn-danger mt-2" onclick="refresh()">Reiniciar selección</button>
                                    </div>
						  		</div>
                            </div>
                        </div>

                        <div class="col-lg-6 col-md-6 mb-4">
                        	<div id="mondayPlayers"></div>
                        </div>
                    </div>

                    <div class="row" id="teamGenerated">  	
                    </div>

                </div>
                <!-- /.container-fluid -->

            </div>
            <!-- End of Main Content -->

            <!-- Footer -->
            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>El lunes a la cancha &copy;</span>
                    </div>
                </div>
            </footer>
            <!-- End of Footer -->

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="js/sb-admin-2.min.js"></script>

    <!-- Page level plugins -->
    <script src="vendor/chart.js/Chart.min.js"></script>

    <!-- Page level custom scripts -->
    <script src="js/demo/chart-area-demo.js"></script>
    <script src="js/demo/chart-pie-demo.js"></script>

    <script>
	let teamOneArray = [];
	let teamTwoArray = [];
	let mondayPlayers = [];
	pointsTeamOne = 0;
	pointsTeamTwo = 0;
	teamHTML = '';
	mondayPlayersHTML = '';
	maxPlayers =  12;
    const ordenPosiciones = ["Arquero", "Defensor", "Mediocampista", "Delantero"];

	let allPlayers = [
		{ nombre: "Alejandro", habilidad: 60, resistencia: 75, velocidad: 55, potenciaDisparo: 70, defensa: 60, medio: 50, ataque: 65, posicion: "Delantero", edad: 46, onTeam: false},
		{ nombre: "Claudio",  habilidad: 60, resistencia: 75, velocidad: 65, potenciaDisparo: 40, defensa: 60, medio: 79, ataque: 50, posicion: "Mediocampista", edad: 44, onTeam: false },
		{ nombre: "Carlos",  habilidad: 40, resistencia: 80, velocidad: 55, potenciaDisparo: 50, defensa: 90, medio: 50, ataque: 30, posicion: "Defensor", edad: 42, onTeam: false },
		{ nombre: "Jona",  habilidad: 85, resistencia: 90, velocidad: 80, potenciaDisparo: 70, defensa: 70, medio: 90, ataque: 80,posicion: "Mediocampista", edad: 26, onTeam: false },
		{ nombre: "Lequi",  habilidad: 80, resistencia: 70, velocidad: 70, potenciaDisparo: 40, defensa: 70, medio: 75, ataque: 75, posicion: "Mediocampista", edad: 33, onTeam: false },
		{ nombre: "Nico",  habilidad: 80, resistencia: 85, velocidad: 80, potenciaDisparo: 85,defensa: 60, medio: 50, ataque: 90, posicion: "Delantero", edad: 35, onTeam: false },
		{ nombre: "David Barr",  habilidad: 92, resistencia: 85, velocidad: 85, potenciaDisparo: 80,defensa: 50, medio: 80, ataque: 90, posicion: "Mediocampista", edad: 34, onTeam: false },
		{ nombre: "Martin",  habilidad: 65, resistencia: 82, velocidad: 75, potenciaDisparo: 75, defensa: 85, medio: 40, ataque: 70, posicion: "Defensor", edad: 44, onTeam: false },
		{ nombre: "Mati Nez",  habilidad: 50, resistencia: 60, velocidad: 50, potenciaDisparo: 40, defensa: 90, medio: 20, ataque: 40, posicion: "Arquero", edad: 23, onTeam: false },
		{ nombre: "Emma",  habilidad:90, resistencia: 30, velocidad: 70, potenciaDisparo: 70, defensa: 60, medio: 70, ataque: 90,posicion: "Mediocampista", edad: 23, onTeam: false },
		{ nombre: "Mati Vega",  habilidad: 89, resistencia: 77, velocidad: 80, potenciaDisparo: 70, defensa: 37, medio: 78, ataque: 79, posicion: "Delantero", edad: 34, onTeam: false },
		{ nombre: "Lukka",  habilidad: 60, resistencia: 78, velocidad: 75, potenciaDisparo: 70, defensa: 40, medio: 65, ataque: 60, posicion: "Delantero", edad: 23, onTeam: false },
		{ nombre: "Facu",  habilidad: 60, resistencia: 60, velocidad: 65, potenciaDisparo: 60, defensa: 95, medio: 40, ataque: 60, posicion: "Arquero", edad: 23, onTeam: false },
		{ nombre: "Manu",  habilidad: 85, resistencia: 70, velocidad: 75, potenciaDisparo: 99, defensa: 70, medio: 85, ataque: 90, posicion: "Delantero", edad: 23, onTeam: false },
        { nombre: "Lucas L",  habilidad: 65, resistencia: 80, velocidad: 72, potenciaDisparo: 82, defensa: 79, medio: 81, ataque: 78, posicion: "Mediocampista", edad: 27, onTeam: false },
        { nombre: "Willy",  habilidad: 70, resistencia: 30, velocidad: 72, potenciaDisparo: 90, defensa: 30, medio: 80, ataque: 90, posicion: "Delantero", edad: 36, onTeam: false },
        { nombre: "Marce",  habilidad: 85, resistencia: 70, velocidad: 75, potenciaDisparo: 70, defensa: 30, medio: 80, ataque: 80, posicion: "Delantero", edad: 35, onTeam: false },
        { nombre: "Juanito",  habilidad: 80, resistencia: 70, velocidad: 75, potenciaDisparo: 70, defensa: 30, medio: 70, ataque: 80, posicion: "Delantero", edad: 36, onTeam: false },
        { nombre: "Mike",  habilidad: 60, resistencia: 60, velocidad: 60, potenciaDisparo: 60, defensa: 50, medio: 50, ataque: 50, posicion: "Delantero", edad: 36, onTeam: false },
        { nombre: "Jorge",  habilidad: 60, resistencia: 60, velocidad: 60, potenciaDisparo: 60, defensa: 50, medio: 50, ataque: 50, posicion: "Delantero", edad: 36, onTeam: false },
        { nombre: "Juacko",  habilidad: 60, resistencia: 60, velocidad: 60, potenciaDisparo: 60, defensa: 50, medio: 50, ataque: 50, posicion: "Delantero", edad: 36, onTeam: false }
	];


	function getForPosition(position, teamArray) {
	  	return teamArray.filter(player => {
	  		return player.posicion === position;
	  	});

	}

	function refresh() {
		console.log('refresh');
		teamOneArray = [];
		teamTwoArray = [];
		mondayPlayers = [];
		pointsTeamOne = 0;
		pointsTeamTwo = 0;
		teamHTML = '';
		mondayPlayersHTML = '';

        document.getElementById('errorString').innerHTML = '';
		document.getElementById('teamGenerated').innerHTML = '';
		document.getElementById('mondayPlayers').innerHTML = '';
	}

    // Función de comparación personalizada
    function compararPosiciones(a, b) {
      const posicionA = ordenPosiciones.indexOf(a.posicion);
      const posicionB = ordenPosiciones.indexOf(b.posicion);

      return posicionA - posicionB;
    }

	//random
	function armarEquipos() {

        console.log('RANDOM -----------------------')
		teamOneArray = [];
		teamTwoArray = [];

        mondayPlayers = resetOnTeam(mondayPlayers);

        mondayPlayersRandom = shuffle(mondayPlayers);

        arqueros = getForPosition('Arquero', mondayPlayersRandom);

        if (arqueros) {
            if (arqueros.length > 1) {
                teamOneArray.push(arqueros[0]);
                teamTwoArray.push(arqueros[1]);

                arqueros[0].onTeam = true;
                arqueros[1].onTeam = true;
            }
        }

        let restOfPlayers = mondayPlayers.filter(players => {
            return players.onTeam === false;
        })

	  	for (let i = 0; i < restOfPlayers.length; i++) {
		    if (i % 2 === 0) {
		      teamOneArray.push(restOfPlayers[i]);
		    } else {
		      teamTwoArray.push(restOfPlayers[i]);
		    }
		}

		pointsTeamOne = calcTeamPoints(teamOneArray);
		pointsTeamTwo = calcTeamPoints(teamTwoArray);

		let diff = Math.abs(pointsTeamOne - pointsTeamTwo);

		if (pointsTeamOne !== pointsTeamTwo && diff > 30){
            let i = 0;
			while (diff > 30) {
				console.log('emparejando');
				doTeamsEquals(pointsTeamOne, pointsTeamTwo, i);

				pointsTeamOne = calcTeamPoints(teamOneArray);
				pointsTeamTwo = calcTeamPoints(teamTwoArray);

				diff = Math.abs(pointsTeamOne - pointsTeamTwo);
                i++;
			}
		};

        teamOneArray = teamOneArray.sort(compararPosiciones);
        teamTwoArray = teamTwoArray.sort(compararPosiciones);

		teamHTML = '';
		imprimirEquipo(teamOneArray, 'Equipo 1', pointsTeamOne);
		imprimirEquipo(teamTwoArray, 'Equipo 2', pointsTeamTwo);
	}

    function resetOnTeam(array) {
        updateArray = []
        array.forEach(player => {
            player.onTeam = false;
            updateArray.push(player)
        })
        console.log('updatearray ', updateArray)
        return updateArray;
    }

    function shuffle(array) {
      let currentIndex = array.length,  randomIndex;

      // While there remain elements to shuffle.
      while (currentIndex > 0) {

        // Pick a remaining element.
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex--;

        // And swap it with the current element.
        [array[currentIndex], array[randomIndex]] = [
          array[randomIndex], array[currentIndex]];
      }

      return array;
    }

	function armarLaMejorOpcion() {
        console.log('BEST OPTION -----------------------')
		teamOneArray = [];
		teamTwoArray = [];

        mondayPlayers = resetOnTeam(mondayPlayers);

        console.log('monday players ', mondayPlayers)
	  
	  	//obtengo por posicion en la cancha
	  	arqueros = getForPosition('Arquero', mondayPlayers).sort((a, b) => b.totalPoints - a.totalPoints);
	  	defensores = getForPosition('Defensor', mondayPlayers).sort((a, b) => b.totalPoints - a.totalPoints);
	  	mediocampistas = getForPosition('Mediocampista', mondayPlayers).sort((a, b) => b.totalPoints - a.totalPoints);
	  	delanteros = getForPosition('Delantero', mondayPlayers).sort((a, b) => b.totalPoints - a.totalPoints);

	  	if (arqueros) {
		  	if (arqueros.length > 1) {
		  		teamOneArray.push(arqueros[0]);
		  		teamTwoArray.push(arqueros[1]);

		  		arqueros[0].onTeam = true;
		  		arqueros[1].onTeam = true;

		  	} else if (arqueros.length === 1) {
				teamOneArray.push(arqueros[0]);
				arqueros[0].onTeam = true;

				defensores = mondayPlayers.filter(player => {
		  			return player.posicion === 'Defensor';
		  		});

		  		if (defensores.length > 1) {
		  			teamTwoArray.push(defensores[0])
		  			teamTwoArray.push(defensores[1])
		  			defensores[0].onTeam = true;
		  			defensores[1].onTeam = true;

                    teamOneArray.push(delanteros[delanteros.length - 1]);
                    delanteros[delanteros.length-1].onTeam = true;

		  		} else if (defensores.length === 1) {
		  			//1 defensor y el mejor delantero
		  			teamTwoArray.push(defensores[0]);
		  			teamTwoArray.push(delanteros[0]);
		  			defensores[0].onTeam = true;
		  			delanteros[0].onTeam = true;

                    teamOneArray.push(delanteros[delanteros.length - 1]);
                    delanteros[delanteros.length-1].onTeam = true;
		  		}
		  	};
	  	} else {
	  		mondayPlayers.sort((a, b) => b.totalPoints - a.totalPoints);
	  	}

	  	let restOfPlayers = mondayPlayers.filter(players => {
	  		return players.onTeam === false;
	  	})


        restOfPlayers = restOfPlayers.sort(compararPosiciones);

        console.log('REST OF PLAYERS', restOfPlayers)
        console.log('TEMP TEAM 1', teamOneArray)
        console.log('TEMP TEAM 2', teamTwoArray)


        //MEJORAR ESTO - CUANDO HAY UN SOLOR ARQUERO Y NO HAY DEFENSORES MANDA FRUTA, UN EQUIPO QUEDA CON MENOS
        //EL IF ES FIX MOMENTANEO

        for (let i = 0; i < restOfPlayers.length; i++) {
            if (i % 2 === 0) {
              teamOneArray.push(restOfPlayers[i]);
            } else {
              teamTwoArray.push(restOfPlayers[i]);
            }
        }


		console.log('original team one ', teamOneArray);
		console.log('original team two ', teamTwoArray);

		pointsTeamOne = calcTeamPoints(teamOneArray);
		pointsTeamTwo = calcTeamPoints(teamTwoArray);

		let diff = Math.abs(pointsTeamOne - pointsTeamTwo);

		if (pointsTeamOne !== pointsTeamTwo && diff > 30){
            let i = 0;
			while (diff > 30) {
				console.log('emparejando');
				doTeamsEquals(pointsTeamOne, pointsTeamTwo, i);

				pointsTeamOne = calcTeamPoints(teamOneArray);
				pointsTeamTwo = calcTeamPoints(teamTwoArray);

				diff = Math.abs(pointsTeamOne - pointsTeamTwo);
                i++;
			}
		};
		
        teamOneArray = teamOneArray.sort(compararPosiciones);
        teamTwoArray = teamTwoArray.sort(compararPosiciones);

		teamHTML = '';
		imprimirEquipo(teamOneArray, 'Equipo 1', pointsTeamOne);
		imprimirEquipo(teamTwoArray, 'Equipo 2', pointsTeamTwo);
	}

	function doTeamsEquals(pointsTeamOne, pointsTeamTwo, index) {
		let bestTeam = '';
		let bestOfensePlayer = null;
		let worstOfensePlayer = null;

		//check what is the beast team
		if ((pointsTeamOne > pointsTeamTwo)) {
			console.log('MUCHA DIFERENCIA - equipo 1')
			const getChanges = changePlayer(teamOneArray, teamTwoArray, index);
			console.log('getChanges', getChanges)
			teamOneArray = getChanges[0];
			teamTwoArray = getChanges[1];
		} else {
			console.log('MUCHA DIFERENCIA - equipo 2')
			const getChanges = changePlayer(teamTwoArray, teamOneArray, index);
			teamOneArray = getChanges[1];
			teamTwoArray = getChanges[0];
			console.log('getChanges', getChanges)
		}
	}

	function changePlayer(bestTeam, worstTeam, index) {

		bestOfensePlayer = bestTeam.sort((a, b) => b.totalPoints - a.totalPoints)[index];
		worstOfensePlayer = worstTeam.sort((a, b) => b.totalPoints - a.totalPoints)[(worstTeam.length-1)-index];

		console.log('bestTeam player ',bestOfensePlayer);
		console.log('worstTeam player ',worstOfensePlayer);

        if (bestOfensePlayer === undefined || worstOfensePlayer === undefined) {
            return [bestTeam,worstTeam];
        }


		//TEAM ONE IS BEST
		bestTeam.push(worstOfensePlayer);
		worstTeam.push(bestOfensePlayer);

		//remove player
		bestTeam = bestTeam.filter(player => {
			return player.nombre !== bestOfensePlayer.nombre;
		});

		worstTeam = worstTeam.filter(player => {
			return player.nombre !== worstOfensePlayer.nombre;
		});

		return [bestTeam,worstTeam];
	}

	function calcPointPlayer() {
		points = 0;

		allPlayers = allPlayers.map(player => {
			obj = {...player};
			points = (player.habilidad + player.resistencia + player.velocidad + player.potenciaDisparo) / 4;

			if (player.posicion === 'Arquero') {
				points = (points + player.defensa) / 2 
			} else if (player.posicion === 'Defensor') {
				points = (points + player.defensa) / 2 
			} else if (player.posicion === 'Mediocampista') {
				points = (points + player.medio) / 2 
			} else {
				points = (points + player.ataque) / 2 
			}

			obj.totalPoints = Math.round(points);
			obj.onTeam = false;
			return obj;
		})
	}

	function calcTeamPoints(team){
		let totalPoints = 0;
		team.forEach( player => {
			totalPoints += player.totalPoints;
		})

		return totalPoints;
	}

	function imprimirJugadores() {


		let mondayPlayersHTML = '';
		mondayPlayersHTML += `<h3>Convocados para el próximo partido <span class="badge bg-primary rounded-pill" style="color: white">${mondayPlayers.length} / ${maxPlayers}</span></h3> 
	  			   <ol class="list-group list-group-numbered">`;
	  mondayPlayers.forEach((player, index) => {
	   mondayPlayersHTML += `<li class="list-group-item d-flex justify-content-between align-items-start">${player.nombre}
	   							<div class="ms-2 me-auto">
	   								<div class="fw-bold">${player.posicion}</div>
								</div>
								<span class="badge bg-primary rounded-pill" style="color: white">${player.totalPoints}</span>
	   						</li>`;
	  });
	  mondayPlayersHTML += `</ol>`;

	  if (mondayPlayers.length < maxPlayers) {
	  mondayPlayersHTML += `<h5 class="mt-2">Faltan ${maxPlayers - mondayPlayers.length} jugadores</h5>`
	  }

	  if (mondayPlayers.length === maxPlayers) {
	  	mondayPlayersHTML += `<button class="btn btn-primary mt-2" onclick="armarEquipos()">Armar equipos parejos random</button> 
	  						  <button class="btn btn-success mt-2" onclick="armarLaMejorOpcion('best')">Armar mejor opción</button>`
	  }


	  document.getElementById('mondayPlayers').innerHTML = mondayPlayersHTML;
	}


	function imprimirEquipo(teamArray, title, totalPoints) {
      teamHTML += '<div class="col-lg-6 col-md-6 mb-4  mt-8">';
	  teamHTML += `<h2>${ title }</h2> 
	  			   <ol class="list-group list-group-numbered">`;
	  teamArray.forEach((player, index) => {

        if (player.posicion === 'Delantero') {
            teamHTML += `<li class="list-group-item d-flex justify-content-between align-items-start list-group-item-success">`
        } else if (player.posicion === 'Mediocampista') {
            teamHTML += `<li class="list-group-item d-flex justify-content-between align-items-start list-group-item-warning">`
        }else if (player.posicion === 'Arquero') {
            teamHTML += `<li class="list-group-item d-flex justify-content-between align-items-start list-group-item-danger">`
        }else if (player.posicion === 'Defensor') {
            teamHTML += `<li class="list-group-item d-flex justify-content-between align-items-start list-group-item-primary">`
        }


	   teamHTML += `${player.nombre} 
	   					<div class="fw-bold">${player.posicion}</div>
				    	<span class="badge bg-primary rounded-pill" style="color: white">${player.totalPoints}</span>
				    </li>`;
	  });
	  teamHTML += `<li class="list-group-item d-flex justify-content-between align-items-start"><h3>Puntos totales: ${totalPoints}</h3></li>`;
	  teamHTML += `</ol>`;
      teamHTML += '</div>';

	  document.getElementById('teamGenerated').innerHTML = teamHTML;

	}

	function generateDropdown() {
		let  allPlayersList = document.getElementById('allPlayersSelect');
		
		allPlayers.forEach((player, index) => {
			 let opcion = document.createElement('option');
			  opcion.value = player.nombre;
			  opcion.text = `${index+1}-${player.nombre} (${player.totalPoints})`;
			  allPlayersList.add(opcion);	
		});
	}

	function addPlayers() {


	  let playersSelected = document.getElementById('allPlayersSelect');

	  cantSelected = 0;
	  for (var i = 0; i < playersSelected.options.length; i++) {
	  	if (playersSelected.options[i].selected) {
			cantSelected++;
	  	} 
	  }

	  if (cantSelected + mondayPlayers.length > maxPlayers) {
        document.getElementById('errorString').innerHTML = '<span class="alert alert-danger" style="display:inline-block; margin-top: 20px" role="alert">Se excele la cantidad máxima de jugadores</span>';
	  } else {
          document.getElementById('errorString').innerHTML = '';
	  	  document.getElementById('teamGenerated').innerHTML = '';
		  for (var i = 0; i < playersSelected.options.length; i++) {
		  	if (playersSelected.options[i].selected) {

		  		const isPlayerAlreadySelected = mondayPlayers.find(player => {
		  			return player.nombre === playersSelected.options[i].value;
		  		})

		  		console.log('isPlayerAlreadySelected ', isPlayerAlreadySelected)
		  		if (isPlayerAlreadySelected === undefined) {
			  		const player = allPlayers.find(player => {
			  			return player.nombre === playersSelected.options[i].value;
			  		})
		           mondayPlayers.push(player);
		  		}
		  	}
		  }

        for (var i = 0; i < playersSelected.options.length; i++) {
            playersSelected.options[i].selected = false;
        }
		imprimirJugadores();
	  }



	  console.log('mondayPlayers ', mondayPlayers);
	}

	calcPointPlayer();
	generateDropdown();

</script>

</body>

</html>